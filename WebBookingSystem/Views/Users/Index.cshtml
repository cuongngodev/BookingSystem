@model IEnumerable<BookingSystem.Data.Entities.ApplicationUser>
@{
    ViewData["Title"] = "Manage Users";
    Layout = "_Layout";
}

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-white">👥 Manage Users</h2>
        <form method="get" action="/Users/SearchByName" class="d-flex" style="max-width: 300px;">
            <input type="text" name="name" class="form-control me-2" placeholder="Search user..." />
            <button class="btn btn-outline-light" type="submit"><i class="bi bi-search"></i></button>
        </form>
    </div>

    <div class="card glass-card shadow-sm">
        <div class="card-body p-4">
            <table class="table table-hover align-middle text-light">
                <thead class="table-header text-uppercase small text-secondary">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Full Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col" class="text-end">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        int index = 1;
                        foreach (var user in Model)
                        {
                            <tr>
                                <td>@index</td>
                                <td>@($"{user.FirstName} {user.LastName}")</td>
                                <td>@user.Email</td>
                                <td>@(string.IsNullOrEmpty(user.PhoneNumber) ? "—" : user.PhoneNumber)</td>
                                
                                <td class="text-end">
                                    <a asp-action="Details" asp-route-id="@user.Id" class="btn btn-sm btn-outline-light me-1">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                    <a asp-action="Edit" asp-route-id="@user.Id" class="btn btn-sm btn-outline-warning me-1">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                    <form asp-action="Delete" asp-route-id="@user.Id" method="post" class="d-inline">
                                        @Html.AntiForgeryToken()
                                        <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this user?');">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            index++;
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6" class="text-center text-secondary py-4">
                                <i class="bi bi-person-dash display-6"></i>
                                <p class="mt-2">No users found.</p>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Styling -->
<style>
    body {
        background: linear-gradient(135deg, #141E30, #243B55);
        color: white;
    }

    .glass-card {
        background: rgba(255, 255, 255, 0.07);
        border-radius: 16px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .table {
        color: white;
    }

    .table-hover tbody tr:hover {
        background-color: rgba(255, 255, 255, 0.1);
        transition: 0.2s ease;
    }

    .table-header {
        border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    }

    .badge {
        font-size: 0.8rem;
    }

    .btn-outline-light:hover {
        background: #fff;
        color: #000;
    }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
